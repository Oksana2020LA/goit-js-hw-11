{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n\n// const form = document.querySelector(\".form\");\n// const gallery = document.querySelector(\".gallery\");\n// const container = document.querySelector(\"div\");\n// const inputDate = document.querySelector(\"input\");\n\n\n\n// const showLoader = () => {\n//   const loader = document.createElement('span');\n//   loader.classList.add('loader');\n//   container.append(loader);\n// };\n\n// const hideLoader = () => {\n//   const loader = document.querySelector('.loader');\n//   if (loader) {\n//     loader.remove();\n//   }\n// };\n\n// form.addEventListener(\"submit\", (event) => {\n//   showLoader();\n//    gallery.innerHTML = \"\";\n//    event.preventDefault();\n//    const searchTerm = inputDate.value;\n//    searchImages(searchTerm);\n    \n// });\n\n// function searchImages(searchTerm) {\n//   const apiKey = '42179520-d47d5bd3a5ac50ed017a72958';\n//   const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15`;\n//   fetch(url)\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       } else {\n//         return response.json();\n//       }\n//     })\n//     .then(data => {\n//       if (data.hits.length === 0) {\n//         iziToast.error({\n//           message: 'Sorry, there are no images matching your search query.<br>Please try again!</br>',\n//           position: 'center',\n//           transitionIn: \"fadeInLeft\",\n//         });\n//         hideLoader()\n//       } else {\n        \n//         const markup = data.hits\n//           .map(data => {\n//             return `\n//             <li class=\"gallery-item\"><a href=\"${data.largeImageURL}\">\n//           <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n//           <p><b>Likes: </b>${data.likes}</p>\n//           <p><b>Views: </b>${data.views}</p>\n//           <p><b>Comments: </b>${data.comments}</p>\n//           <p><b>Downloads: </b>${data.downloads}</p>\n//           </li>`;\n//           }).join('');\n        \n//         gallery.insertAdjacentHTML(\"beforeend\", markup);\n//         const lightbox = new SimpleLightbox('.gallery a', {\n//           captions: true,\n//           captionType: 'attr',\n//           captionsData: 'alt',\n//           captionPosition: 'bottom',\n//           fadeSpeed: 150,\n//           captionSelector: \"img\",\n//           captionDelay: 250,\n//         });\n\n//         lightbox.on('show.simplelightbox').refresh();\n//         hideLoader();\n//       }\n//     })\n//     .catch((error) => console.log(error));\n   \n// };\n\n// function makeMarkup(arr) {\n//   return arr\n//     .map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//         id,\n//       }) => `<a class=\"gallery__link\" href=\"${largeImageURL}\">\n//   <div class=\"gallery-item\" id=\"${id}\">\n//     <img class=\"gallery-item__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n//     <div class=\"info\">\n//       <p class=\"info-item\"><b>Likes</b>${likes}</p>\n//       <p class=\"info-item\"><b>Views</b>${views}</p>\n//       <p class=\"info-item\"><b>Comments</b>${comments}</p>\n//       <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n//     </div>\n//   </div>\n// </a>`\n//     )\n//     .join('');\n// }\n\n\n// //Імпорти бібліотек\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n// //Посилання на форму та галерею\n// const form = document.querySelector('.search-form');\n// const gallery = document.querySelector('.gallery');\n// const loader = document.querySelector('.loader');\n// //Прослуховування \"сабміту\" форми\n// form.addEventListener('submit', onFormSuccess);\n// let counter = 0;\n// loader.style.display = 'none';\n\n// //Отримання і відмальовка фото\n// function onFormSuccess(e) {\n//   e.preventDefault();\n//   gallery.innerHTML = '';\n//   loader.style.display = 'block';\n\n//   searchImage(e.target.elements.searchQuery.value);\n//   e.target.elements.searchQuery.value = '';\n// }\n\n// //Функція запиту данних по пошуковому слову\n// function searchImage(searchWord) {\n//   fetch(\n//     `https://pixabay.com/api/?key=42179520-d47d5bd3a5ac50ed017a72958&q=${searchWord}&image_type=photo&orientation=horizontal&safesearch=true`\n//   )\n//     .then(r => {\n//       if (!r.ok) {\n//         throw new Error(r.status);\n//       }\n//       return r.json();\n//     })\n//     .then(r => {\n//       if (r.total === 0) {\n//         iziToast.warning({\n//           title: 'Wrong request',\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//         });\n//         return;\n//       }\n//       gallery.innerHTML = makeMarkup(r.hits);\n//       counter += 1;\n//       let lightbox = new SimpleLightbox('.gallery a');\n//       lightbox.refresh();\n//       loader.style.display = 'none';\n//     })\n//     .catch(error =>\n//       iziToast.error({\n//         title: 'Error',\n//         message: `Oh, we have problem: ${error}`,\n//       })\n//     );\n// }\n\n// //Створення розмітки з масиву\n\n// function makeMarkup(arr) {\n//   return arr\n//     .map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//         id,\n//       }) => `<a class=\"gallery__link\" href=\"${largeImageURL}\">\n//   <div class=\"gallery-item\" id=\"${id}\">\n//     <img class=\"gallery-item__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n//     <div class=\"info\">\n//       <p class=\"info-item\"><b>Likes</b>${likes}</p>\n//       <p class=\"info-item\"><b>Views</b>${views}</p>\n//       <p class=\"info-item\"><b>Comments</b>${comments}</p>\n//       <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n//     </div>\n//   </div>\n// </a>`\n//     )\n//     .join('');\n// }\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = '42179520-d47d5bd3a5ac50ed017a72958';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst form = document.querySelector('.form');\nconst galery = document.querySelector('.gallery');\nconst spinner = document.querySelector('.loader');\n\nspinner.style.display = 'none';\n\n\n\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(ev) {\n    ev.preventDefault();\n    spinner.style.display = 'block';\n    galery.innerHTML = '';\n    const selectedPicture = ev.target.image.value;\n    fetchImages(selectedPicture).then(images => {\n        handleWithResponce(images);\n    }).catch(error => console.log(error))\n}\n\nfunction fetchImages(image) {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    return fetch(`${BASE_URL}?${searchParams}&q=${image}`).then(response => {\n        if (!response.ok) {\n            throw new Error(response.status)\n        }\n        return response.json();\n    })\n}\n\nfunction handleWithResponce(images) {\n    if (!images.total) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        spinner.style.display = 'none';\n        return\n    }\n    iziToast.success({\n        position: 'topRight',\n        message: `Congratulations! We found ${images.total} images`,\n        timeout: 2000,\n    });\n    renderGallery(images.hits);\n    spinner.style.display = 'none';\n    const galleryLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    galleryLightBox.refresh();\n}\n\n\nfunction renderGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, comments, downloads, views }) => `<li class='gallery-item'>\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class=\"gallery-description\">\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Likes</div>\n        <div class=\"lower-text\">${likes}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Views</div>\n        <div class=\"lower-text\">${views}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Comments</div>\n        <div class=\"lower-text\">${comments}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Downloads</div>\n        <div class=\"lower-text\">${downloads}</div>\n      </span>\n      </div>\n        </a>\n</li>`).join('');\n    galery.insertAdjacentHTML('beforeend', markup);\n}"],"names":["API_KEY","BASE_URL","form","galery","spinner","onFormSubmit","ev","selectedPicture","fetchImages","images","handleWithResponce","error","image","searchParams","response","iziToast","renderGallery","SimpleLightbox","markup","webformatURL","largeImageURL","tags","likes","comments","downloads","views"],"mappings":"6vBA+MA,MAAMA,EAAU,qCACVC,EAAW,2BAEXC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAU,SAAS,cAAc,SAAS,EAEhDA,EAAQ,MAAM,QAAU,OAIxBF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,SAASA,EAAaC,EAAI,CACtBA,EAAG,eAAc,EACjBF,EAAQ,MAAM,QAAU,QACxBD,EAAO,UAAY,GACnB,MAAMI,EAAkBD,EAAG,OAAO,MAAM,MACxCE,EAAYD,CAAe,EAAE,KAAKE,GAAU,CACxCC,EAAmBD,CAAM,CACjC,CAAK,EAAE,MAAME,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACxC,CAEA,SAASH,EAAYI,EAAO,CACxB,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAKb,EACL,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGC,KAAYY,OAAkBD,GAAO,EAAE,KAAKE,GAAY,CACpE,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MACxB,CAAK,CACL,CAEA,SAASJ,EAAmBD,EAAQ,CAChC,GAAI,CAACA,EAAO,MAAO,CACfM,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACrB,CAAS,EACDX,EAAQ,MAAM,QAAU,OACxB,MACH,CACDW,EAAS,QAAQ,CACb,SAAU,WACV,QAAS,6BAA6BN,EAAO,eAC7C,QAAS,GACjB,CAAK,EACDO,EAAcP,EAAO,IAAI,EACzBL,EAAQ,MAAM,QAAU,OACA,IAAIa,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACnF,QAAO,CAC3B,CAGA,SAASD,EAAcP,EAAQ,CAC3B,MAAMS,EAAST,EAAO,IAAI,CAAC,CAAE,aAAAU,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,MAAAC,CAAO,IAAK;AAAA,oCACxEL;AAAA,0CACMD,WAAsBE;AAAA;AAAA;AAAA;AAAA,kCAI9BC;AAAA;AAAA;AAAA;AAAA,kCAIAG;AAAA;AAAA;AAAA;AAAA,kCAIAF;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,MAI5B,EAAE,KAAK,EAAE,EACXrB,EAAO,mBAAmB,YAAae,CAAM,CACjD"}